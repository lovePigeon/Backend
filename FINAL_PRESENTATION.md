# 최종발표 준비 자료 - 민원냠냠 Core Engine

## 📋 목차

1. [오프닝: 조기경보 의사결정 도구](#0-오프닝)
2. [문제 정의: 왜 지금 "우선순위를 정해주는 도구"가 필요한가](#1-문제-정의)
3. [비둘기 근거: '결론'이 아니라 '사각지대를 좁히는 보조 신호'](#2-비둘기-근거)
4. [솔루션 구조: Core Engine + Pigeon Layer](#3-솔루션-구조)
5. [데이터·분석 설계: 역할 분담](#4-데이터분석-설계)
6. [핵심 지표와 로직: UCI + AI + Blind Spot](#5-핵심-지표와-로직)
7. [최종 산출물: 3종 세트](#6-최종-산출물)
8. [시스템 구현: 백엔드/DB/ETL/프론트](#7-시스템-구현)
9. [데모 시나리오: 3-step](#8-데모-시나리오)
10. [검증·리스크 설계](#9-검증리스크-설계)
11. [확장성](#10-확장성)
12. [기대효과](#11-기대효과)

---

## 0. 오프닝: 우리가 만든 건 '비둘기 맞히기'가 아니라 '조기경보 의사결정 도구'

이 프로젝트는 비둘기 자체를 증명하거나 "비둘기가 문제를 정확히 맞힌다"를 주장하는 시스템이 아니다. 핵심은 **한정된 인력·예산 조건에서 '어디부터 점검할지'(우선순위) → '어떻게 개입할지'(조치 카드) → '실제로 효과가 있었는지'(전후 추적)**까지 한 번에 이어지는 **행정용 조기경보(Early-Warning) 의사결정 도구**를 구현하는 데 있다.

### 핵심 메시지
- **"비둘기 맞히기 프로젝트가 아니라, 도시 조기경보 의사결정 도구입니다."**
- Core Engine은 비둘기 없이 100% 동작
- Pigeon Layer는 Optional, 해석/보조 검증 신호로만 사용

---

## 1. 문제 정의: 왜 지금 "우선순위를 정해주는 도구"가 필요한가

### 1-1. 사후 데이터의 한계

서울의 생활환경(쓰레기·악취·청소·불법투기) 문제는 **민원이 '사후 데이터'로만 쌓이고**, 담당 인력은 제한되어 있어 "문제가 커진 뒤"에야 대응이 시작되는 구조다.

**송파 자원순환공원 사례:**
- 동일 주소 악취 민원 **1,402건 (전국 1위)**
- 악취 검사 19회 중 **18회 '적합'** 판정
- 주민 증언: "저녁·밤 12시 이후가 가장 심하다"
- **데이터상 '깨끗', 현실은 '지옥'** - 측정 시간(주간)과 실제 악취 시간대(저녁·심야) 불일치

### 1-2. 감시 인프라의 취약성

서울시 CCTV는 **총 117,486대** 수준이지만:
- **방범·교통용이 약 95%**
- **생활환경(쓰레기·악취·불법투기) 전용 CCTV는 1% 미만**

쓰레기·음식물·악취 hotspot이 반복되는 공간(원룸 밀집·후면 골목·소규모 상권 골목·공원·하천 주변 등)은 애초에 모니터링이 거의 닿지 않는 경우가 많다.

### 1-3. 단순 집계의 한계

"민원이 많이 나온 곳을 지도에 찍어 보여주는 것"만으로는 행정이 실제로 움직이기 어렵다. 중요한 질문은:
- **"지금 조용한데 곧 문제 될 곳은 어디인가"**
- **"이번 주 어디부터 사람을 보내야 하는가"**

이 질문에 답하려면 단순 집계가 아니라 **조기 신호 기반의 우선순위화**가 필요하다.

---

## 2. 비둘기 근거: '결론'이 아니라 '사각지대를 좁히는 보조 신호'

### 2-1. 비둘기는 "판사"가 아니라 "레이더"다

이 프로젝트에서 비둘기는 "정답을 맞히는 예측 변수"가 아니라, **사각지대를 통과하며 반복적으로 남는 '후보 신호'**다. 즉 레이더가 울리면(비둘기 패턴 변화가 관찰되면), 그때 **민원·생활인구·공간구조 지표로 교차 검증**해 우선 점검 후보를 좁히는 방식이다.

### 2-2. 왜 하필 '비둘기'인가: 도시 구조·AI·3D 공간정보와의 정합성

**3D 공간 커버리지:**
- 비둘기는 CCTV·순찰이 닿지 않는 공간을 일상적으로 이동
- 지붕·전선·간판·벤치·쓰레기 주변 등 **도시의 3D 구조물을 따라 이동/착지**
- 2D 시야의 고정 감시보다 **사각지대 커버 관점에서 유리한 "이동형 후보 지표"**

**AI 탐지 용이성:**
- 형태·색 대비가 비교적 뚜렷하고 주간 활동 중심
- CCTV/드론 영상 기반 YOLO 탐지·트래킹과 결합하기 용이
- "AI로 잡기 쉬운 도시 생명체"라는 실무적 장점

### 2-3. "환경오염을 반영하는 생물학적 지표"로서의 근거

**해외 연구 근거:**
- **대만 연구:** 비둘기 위·장 속에서 플라스틱 잔류물이 다수 발견
- **멕시코 연구:** 비둘기 분변 **1g당 미세플라스틱이 고농도로 검출**, 도시 오염을 반영하는 biological indicator로 해석

**프로젝트의 주장:**
- "비둘기=오염 측정기"가 아니라, **도시의 유기물/먹이원/오염 변화에 반응할 가능성이 높은 후보 생태지표**
- 이를 **단독 결론이 아니라 보조 신호로 사용**

### 2-4. 관측 대상(비둘기 데이터)을 '지표'로 정의하는 방식

**5가지 측정 항목:**
1. 군집 밀도
2. 체류 시간
3. 반복 방문 빈도
4. 착지 지점 3D 좌표 (지붕·전선·간판·실외기·집수정 등)
5. 시간대·계절별 패턴 (예: 여름 저녁 군집 증가, 악취 민원 시간대와의 상관 가능성)

**선행성(lead time) 가설:**
- 오염·습기·유기물 발생 시 비둘기 패턴이 **2~4일 먼저 변화**할 수 있다
- 단정이 아니라 "신뢰성 키워드"로 배치

---

## 3. 솔루션 구조: Core Engine + Pigeon Layer로 '완주 가능한 조기경보' 재배치

### 3-1. 방향 전환의 핵심(한 줄)

서울 데이터만으로 모든 걸 해결하려 하면 시간축이 비어 "지도+건수" 수준으로 떨어지기 때문에, **데이터 역할을 분리·조합하여 '완주 가능한 구조'로 재배치**했다.

### 3-2. Core Engine: 공공데이터 기반의 우선순위+설명+추적

Core는 민원·인구·공간 신호를 종합해 **UCI(Urban Comfort Index)**를 만들고, 그 결과를:
- **우선순위 리스트(Priority Queue)**
- **권고조치(Action Cards)**
- **전후 효과추적(Effect Tracking)**

으로 바로 출력하는 구조다. 이때 지도는 핵심 산출물이 아니라, 결정에 필요한 근거를 전달하는 **"중간물(visualization layer)"**에 해당한다.

### 3-3. Pigeon Layer: "결론"이 아닌 교차검증·사각지대 보완 레이어

Pigeon layer는 단독 판단을 하지 않는다. 대신:
- **Human/Geo/Population 신호와 비둘기 신호를 함께 고려**
- **기존 행정 데이터가 놓칠 수 있는 사각지대(blind spot)**를 후보로 띄움
- 우선순위 또는 점검 필요성을 보강하는 역할로 설계

---

## 4. 데이터·분석 설계: "서울은 공간/규모, 전주는 시간축, 강남은 검증"으로 역할 분담

### 4-1. 데이터 결손 정의

**서울시 전체 기준으로 '정확한 발생 시간(시·요일)'이 있는 민원 데이터가 사실상 없고**, 그러나 시스템에서는 시간 정보가 액션 생성에 핵심이기 때문에, 시간축을 외부 데이터로 보완했다.

### 4-2. 데이터 역할 분리

| 데이터 | 역할 | 저장 위치 |
|--------|------|-----------|
| **서울 민원** (스마트 불편신고) | Human signal의 기반 (일/지역 단위 정제 및 신호화) | `signals_human` |
| **전주시 불법투기 단속 데이터** | 시간 패턴 템플릿 ("예측"이 아니라 "행동 가이드") | `time_pattern_templates` |
| **강남구 상습 무단투기 지역** (XLSX) | Geo signal (확정 사건이 아니라 위험 후보군으로 재정의, 위험도 0~1 산출) | `signals_geo` |
| **강남구 쓰레기 수거 현황** (CSV) | Effect tracking (개입 전후 비교 가능한 cleanup_logs 컬렉션 설계) | `cleanup_logs` |
| **서울시 생활인구** (ZIP 35개) | Population signal (시간대→일 단위 집계, 야간 인구·증감률 산출) | `signals_population` |

### 4-3. 설계 목적

"정확한 예측"이 아니라, **행정이 지금 당장 실행 가능한 우선순위·조치·추적을 만들 수 있게 하는 최소 요건을 충족**하는 데 있다.

---

## 5. 핵심 지표와 로직: UCI + 이상탐지(AI) + 블라인드스팟 탐지

### 5-1. UCI(Urban Comfort Index): 종합 위험 점수의 계산 구조와 출력

**UCI = Human(50%) + Geo(30%) + Population(20%)**

**특징:**
- 결측 데이터는 자동 보정
- 서울 평균 대비 상대 위험도 반영
- 상습 무단투기 지역 가중치 추가

**출력:**
- 점수(0~100) + 등급(A~E)
- 자동 설명: `why_summary` / `key_drivers`
- "왜 우선인지"를 말로 풀어주는 장치

### 5-2. Human signal: "지금 많은 곳"이 아니라 "지금 빠르게 나빠지는 곳"

민원 데이터는 단순 건수 집계가 아니라:
- **증가율·반복성·야간 비율**로 신호화
- `signals_human` 스키마로 설계
- 시스템이 답하려는 질문: **"지금 빠르게 나빠지는 지역(조기 감지)"**

### 5-3. AI(비지도 이상탐지): '예측'이 아니라 '최근 변화의 비정상성 점수화'

**AI의 역할:**
- "미래 예측"이 아니라 **조기경보**
- 과거 **8주간 정상 패턴**을 기준으로 최근 **4주 데이터가 통계적으로 얼마나 비정상적인지** 계산
- **anomaly_score(0~1)**와 **anomaly_flag(true/false)** 생성

**모델:**
- 비지도 이상탐지 구조 (Z-score / Rolling deviation / Isolation Forest 스타일 로직)
- 설명 가능성 확보

**입력 feature:**
- 최근 4주 민원 증가율
- 서울 평균 대비 변화 폭
- 야간 민원 비중 변화
- 생활인구 증감률 변화
- 반복 민원 비율 변화

**연결:**
- Priority Queue 우선순위 상승
- Action Card 설명 생성

### 5-4. Blind Spot Detection: 민원은 적지만 구조적으로 위험한 지역을 띄우는 로직

**기능:**
- "민원은 적지만 구조적으로 위험한 지역" 탐지
- 생활인구 데이터까지 결합
- **민원 증가 원인이 인구 증가인지, 환경 악화인지** 분리

---

## 6. 최종 산출물: 3종 세트가 '지도 프로젝트'에서 '결정 도구'로 바꾼다

이 프로젝트의 메인 산출물은 "대시보드(지도 화면)" 자체가 아니라, **행정이 바로 실행하는 3종 세트**다.

### 6-1. Priority Queue: "이번 주 어디부터 점검?"

**기능:**
- 이번 주/이번 달 점검 우선순위 TOP N 지역 제공
- 각 지역마다 **어떤 신호가 상승했는지 / 왜 우선 점검 대상인지** 자동 요약

**프론트 구현:**
- "우선순위 검사 대기열"로 구현
- 동 단위로 정렬된 리스트 제공
- 클릭 시 **우선순위 결정 근거** (전체 민원 수 / 일평균 민원 수 / 재발 민원 비율) 및 인간/지리 신호 세부 현황 확인

### 6-2. Action Cards: "청소하라"가 아니라 "어떻게 개입할지"

**기능:**
- 데이터 근거를 바탕으로 **개입 유형** 제안
- 예: "야간 민원 집중 → 야간·주말 집중 관리 권고"
- 예: "구조 취약(골목/후면) → 쓰레기통/수거 동선/시설 개선 후보"
- **행동 단위의 권고**

**프론트 구현:**
- 각 개입에 대해 **예상되는 개선 효과, 예상 비용, 권장 관리 시간 및 관리 방식** 제공

**시간 패턴 템플릿:**
- 전주시 단속 데이터 기반 `time_pattern_templates` 사용
- "예측"이 아니라 **행정 행동용 템플릿** (야간·주말·피크 시간대 추출)
- 서울 데이터에 시간 정보가 없어도 시간 기반 Action Card 생성 가능

### 6-3. Before/After Tracking(Effect Tracking): "정책 효과 있나요?"에 숫자로 답하는 구조

**기능:**
- 개입 전후 지표가 감소했는지 추적
- 단순 시각화가 아니라 "정책 개입의 효과를 보는 구조"

**백엔드 구현:**
- 쓰레기 수거 현황 데이터를 기반으로 **cleanup_logs 컬렉션을 개입 전·후 비교 가능한 구조로 저장**
- "이 정책 효과 있나요?"에 숫자로 답할 수 있게 함

**프론트 구현:**
- 개입 전후 UCI 변화가 그래프로 비교·분석
- 어떤 개입 방식이 실제로 효과가 있었는지 사례별 결과 제공

---

## 7. 시스템 구현: 백엔드/DB/ETL/프론트

### 7-1. 백엔드·데이터 처리 스택 및 목적 적합성

**기술 스택:**
- **Runtime**: Node.js 20+
- **Framework**: Express.js
- **Database**: MongoDB Atlas (Cloud)
- **ODM**: Mongoose
- **문서화**: Swagger UI (OpenAPI)

**ETL:**
- CSV/Excel/ZIP 처리
- CP949 인코딩 깨짐 문제 해결 (iconv-lite)
- date-fns로 일/월 단위 정규화 및 증감률 계산

**API 문서화:**
- Swagger UI로 `/docs` 문서화 제공
- 프론트 협업과 API 구조 공유 가능

### 7-2. DB 설계(역할 분리): "컬렉션은 역할을 절대 섞지 않음"

**총 9개 컬렉션:**
1. `spatial_units`: 어디를 볼 것인가
2. `signals_human`: 사람 경고 신호 (단순 건수가 아니라 증가율·반복성·야간 집중도)
3. `signals_geo`: 구조적 위험
4. `signals_population`: 사람 흐름
5. `comfort_index`: UCI 계산 결과
6. `baseline_metrics`: 서울시 평균 지표
7. `time_pattern_templates`: 시간 패턴 템플릿
8. `cleanup_logs`: 수거 현황 로그
9. `interventions`: 행정 조치 이력

**특징:**
- `signals_human`은 "단순 건수"가 아니라 증가율·반복성·야간 집중도 등으로 변환
- "지금 조용한데 곧 문제 될 지역"을 묻는 구조로 설계

### 7-3. 프론트 구현: 관리자 대시보드 + 시민 공개 뷰(권한 분리)

**관리자 대시보드:**
- (1) 지금 바로 확인해야 할 사항 요약
- (2) 우선순위 검사 대기열
- (3) 개입 권고사항
- (4) 사각지대 탐지
- (5) 시간대별 패턴 분석
- (6) 개입 전후 효과 추적

**시민 공개 뷰:**
- "낙인/오해 방지"를 위해 **정확한 위치를 공개하지 않고 구 단위 중심으로 제공**
- 전체 추세 지표 (현재 UCI와 전 분기 대비 증감)
- 지난 5개 분기 변화 추세
- 지역별 상태 히트맵 (모니터링 중/안정/개선 중)
- 지역별 신호 추세

---

## 8. 데모 시나리오: 3-step - 심사위원이 "한 번에 이해"하는 흐름

최종 시연은 기능을 나열하기보다 **의사결정이 실제로 진행되는 3단계**로 보여주는 것이 구조에 가장 부합한다.

### Step 1. "지금 바로 확인해야 할 지역" 요약 → Priority Queue

**관리자 대시보드 첫 화면:**
- 우선 점검 대기 중 지역 수
- 즉시 개입이 필요한 지역 수
- 우선순위 검사 대기열에서 동 단위 TOP N 확인

### Step 2. 특정 지역 클릭 → 근거 신호(why_summary/key_drivers) + Action Cards

**리스트에서 특정 동 클릭:**
- 전체 민원 수/일평균/재발 비율
- human/geo 세부 신호 확인
- UCI 기반의 자동 설명 (`why_summary`/`key_drivers`)이 결론을 뒷받침
- 같은 화면에서 개입 권고(Action Cards)가 **"예상 효과/비용/권장 시간/방식"**까지 포함해 출력

### Step 3. 시간대 패턴/전후 추적 → "언제 관리가 먹혔는지" 확인

**시간대별 패턴 분석:**
- 민원 및 생활인구의 시간대/요일 피크 확인
- 관리 시점 잡기

**과거 개입 사례 기준 전후 UCI 변화:**
- 그래프로 비교
- "어떤 개입이 실제로 효과가 있었는지" 확인

### (여유 시 10초 스냅샷) Blind Spot Detection

"민원은 적지만 구조적으로 위험한 구간"이 어떻게 잡히는지 보여주면, **"사후 민원 기반만으로는 못 잡는 구간"**이라는 문제정의가 즉시 연결된다.

---

## 9. 검증·리스크 설계: 비둘기 신호를 '증명 부담'으로 만들지 않는 방식

### 9-1. "항상 일치"를 주장하지 않고, 교차 신호로 오탐을 줄이는 설계

**금지 표현:**
- "항상 일치"를 주장하지 말 것

**올바른 표현:**
- **특정 조건에서 정합적일 가능성**
- **오탐을 줄이기 위한 교차 신호**
- "비둘기 행동 패턴은 후보 생태지표이며, 단독 결론이 아니라 우선 점검 후보를 좁히는 보조 신호로 활용한다"

### 9-2. 교란요인(confounders) 선제 탑재

**교란요인:**
- 급이(사람 행동)
- 공원/광장 이벤트
- 계절성
- 상권
- 기상
- 착지 구조물
- 야간조명
- 청소 주기 변화

이를 "지표 정의·검증 설계"의 일부로 발표 자료에 선제적으로 포함시키는 전략.

### 9-3. 전문가 자문은 "정답 인증"이 아니라 "검증 프레임 확보"

**전문기관 활용 목적:**
- "비둘기가 맞다/틀리다"를 증명하기 위한 것이 아님
- **지표 정의·교란요인·검증 설계가 합리적인지 점검**하기 위한 것

**요청할 내용:**
- 선행성/정합성 정의
- 관찰 단위
- 교차 신호 일치도
- 사후 검증 설계

### 9-4. 공개 리스크(낙인) 대응: 행정 Full / 시민 Partial의 권한 분리

**이중 화면(권한 분리):**

**행정용(Full):**
- 민감 레이어 (우선점검 리스트, 원인분석 등) 포함

**시민용(Partial):**
- **낙인이 아니라 개선/투명성 중심**만 공개
- 동네 지표의 상승/하락 추세
- 개선 완료/진행 현황
- 정확한 신고 가이드
- 공포·낙인을 피하고 신뢰를 회복

---

## 10. 확장성: "기능을 더 넣겠다"가 아니라 "같은 화면으로 여러 부서가 해석"하는 인프라

### 10-1. 확장성의 의미

기능을 많이 넣는 것이 아니라, **하나의 조기경보 지표가 여러 행정 영역에서 같은 화면으로 해석될 수 있는 공통 인프라**라는 점.

### 10-2. 다부서 활용 시나리오

**환경 부서:**
- 악취·쓰레기 조기감지로 활용

**복지 부서:**
- 급이·고립 가능성 공간 신호로 활용

**행정 전체:**
- 반복 민원의 구조적 원인 파악으로 활용

### 10-3. 비둘기 급이 이슈의 복합성

**단순 위생 문제가 아님:**
- 환경·위생 + 주민 갈등 + 노인 고립/정서 문제를 동시에 품는 복합 이슈
- 서울 조례 38곳, 과태료 20/50/100만 원
- 부천 9곳 지정 등

**데이터화 포인트:**
- "어디서/언제/어떤 형태로" 데이터화하는 것이 환경+복지+갈등 관리를 연결할 수 있는 포인트

---

## 11. 기대효과: '우선순위→조치→효과추적'이 연결된 조기경보 체계

이 시스템이 제공하는 효과는 "지도 시각화"가 아니라, **결정과 실행의 비용을 줄이는 구조**다.

### 11-1. 우선순위 리스트

**효과:**
- 한정된 인력을 어디에 먼저 투입할지가 명확해짐
- 특히 생활환경 CCTV 1% 미만의 사각지대 조건에서 효과적

### 11-2. Action Cards

**효과:**
- "청소하라" 수준을 넘어서 **언제/어떻게 개입할지**가 시간 패턴 템플릿과 함께 구체화됨

### 11-3. Before/After Tracking

**효과:**
- "정책 효과가 있었는지"를 **전후 비교 가능한 데이터 구조(cleanup_logs)와 UCI 변화**로 확인
- 단발성 대응이 아니라 **학습되는 행정(효과 기반 운영)**으로 전환

### 11-4. 결론

이 프로젝트는 비둘기를 "정답 머신"으로 내세우지 않고도, 비둘기라는 도시 생태 신호를 **사각지대 축소 레이어**로 배치하여 **조기경보(Early-Warning) 의사결정 도구**를 완성하는 구조로 정리된다.

---

## 📊 발표 시 강조 포인트

### 1. 문제 정의의 명확성
> "민원은 사후 데이터, 인력은 제한적, CCTV는 생활환경에 1% 미만. '어디부터 볼지'가 핵심 문제입니다."

### 2. 솔루션의 실용성
> "지도가 아니라, 우선순위→조치→효과추적까지 연결되는 결정 도구입니다."

### 3. 비둘기의 역할
> "비둘기는 정답이 아니라, 사각지대를 좁히는 보조 신호입니다."

### 4. 데이터 설계의 합리성
> "서울은 공간/규모, 전주는 시간축, 강남은 검증으로 역할 분담했습니다."

### 5. 기술의 설명 가능성
> "AI는 예측이 아니라, 최근 변화의 비정상성을 점수화하는 조기경보입니다."

### 6. 실용성
> "행정이 지금 당장 실행 가능한 우선순위·조치·추적을 제공합니다."

---

## 📄 관련 문서

- [README.md](./README.md) - 프로젝트 개요 및 기술 스택
- [API_ENDPOINTS_GUIDE.md](./API_ENDPOINTS_GUIDE.md) - API 엔드포인트 가이드
- [PRESENTATION_DATA_VALIDATION.md](./PRESENTATION_DATA_VALIDATION.md) - 데이터 검증 발표자료
- [ANOMALY_DETECTION.md](./ANOMALY_DETECTION.md) - AI 이상 탐지 설명
- [DATA_VALIDATION_GUIDE.md](./DATA_VALIDATION_GUIDE.md) - 데이터 검증 가이드

---

**작성일**: 2026-01-12  
**버전**: 1.0.0  
**목적**: 최종발표 준비 자료

