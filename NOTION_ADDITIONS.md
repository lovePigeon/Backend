# 노션 발표 초안 추가 요청사항

## 📋 개요
현재 노션 발표 초안과 실제 구현된 시스템을 비교하여, **노션에 추가해야 할 내용**을 정리했습니다.

---

## 1. 데이터 검증 및 품질 관리 시스템 (중요!)

### 현재 노션 상태
- ❌ 데이터 검증 시스템에 대한 언급 없음

### 추가 요청 내용

**섹션 위치**: "7) 시스템 구현" 또는 "5) 핵심 지표와 로직" 이후에 별도 섹션 추가

**추가할 내용**:

```
### 데이터 품질 관리: 자동화된 검증 및 수정 시스템

**문제**: 대용량 공공데이터 처리 시 데이터 일관성, 완전성, 정확성 보장이 필수

**해결**:
1. **5가지 검증 카테고리 자동 실행**
   - Spatial Units 일관성
   - Signals Human 데이터 (유효성, 중복, 범위)
   - Comfort Index (UCI 점수-등급 일치)
   - Anomaly Signals
   - 데이터 완전성 (날짜 커버리지)

2. **이슈 자동 수정**
   - Grade mismatch 자동 수정 (UCI 점수와 등급 불일치)
   - 데이터 보강 API (결측치 통계적 생성)

3. **실시간 모니터링**
   - API를 통한 데이터 품질 리포트 (`/api/v1/analytics/data-quality`)
   - 완전성 점수, 결측치, 이상치 자동 감지

**발표 포인트**: "데이터 검증부터 이슈 수정까지 전체 프로세스를 자동화하여 계산 결과의 신뢰성을 보장합니다."
```

---

## 2. AI 이상 탐지 (Anomaly Detection) 상세 설명 보강

### 현재 노션 상태
- ✅ "5-3. AI(비지도 이상탐지)" 섹션에 기본 설명 있음
- ❌ 구체적인 알고리즘, 입력 feature, 출력 형식 설명 부족

### 추가 요청 내용

**섹션 위치**: "5-3. AI(비지도 이상탐지)" 섹션에 추가

**추가할 내용**:

```
**입력 Feature (5가지)**:
1. 최근 4주 민원 증가율
2. 서울 평균 대비 변화 폭
3. 야간 민원 비중 변화
4. 생활인구 증감률 변화
5. 반복 민원 비율 변화

**알고리즘**:
- 복합 점수 계산 (가중합)
- Z-score 기반 통계적 이상 탐지
- 과거 8주간 정상 패턴 기준선 학습
- anomaly_score (0-1), anomaly_flag (true/false) 출력

**Priority Queue 통합**:
- anomaly_flag === true인 경우 UCI 점수에 가산점 부여
- why_summary에 "[AI 이상 탐지] 최근 4주 민원이 45% 증가..." 자동 추가
- 프론트엔드에 anomaly_score, anomaly_flag, anomaly_explanation 전달

**발표 포인트**: "무료 로컬 AI로 외부 API 없이도 조기경보 신호를 생성합니다."
```

---

## 3. 시계열 분석 및 데이터 보강 기능

### 현재 노션 상태
- ❌ 시계열 분석, 트렌드 예측, 데이터 보강 기능 언급 없음

### 추가 요청 내용

**섹션 위치**: "5) 핵심 지표와 로직" 또는 "7) 시스템 구현"에 추가

**추가할 내용**:

```
### 시계열 분석 및 데이터 보강

**시계열 분석 API** (`/api/v1/analytics/trend`):
- UCI 트렌드 분석 (선형 회귀 기반)
- 향후 7일 예측 (forecast)
- 방향성 (increasing/decreasing/stable)
- 신뢰도 점수

**민원 트렌드 분석** (`/api/v1/analytics/complaint-trend`):
- 최근 N일간 민원 변화 추세
- 계절성 분석
- 피크 시간대/요일 패턴

**데이터 보강 API** (`/api/v1/analytics/augment`):
- 베이스라인 기반 결측치 채우기
- 통계적 방법으로 데이터 생성
- 신뢰도 점수 제공

**발표 포인트**: "데이터가 부족한 경우에도 통계적 방법으로 보강하여 분석을 지속할 수 있습니다."
```

---

## 4. 실제 처리한 데이터 규모 구체화

### 현재 노션 상태
- ✅ "4) 데이터·분석 설계"에 데이터 소스 언급
- ❌ 실제 처리한 데이터 규모, 처리 결과 구체적 수치 없음

### 추가 요청 내용

**섹션 위치**: "4) 데이터·분석 설계" 또는 "7) 시스템 구현"에 추가

**추가할 내용**:

```
### 실제 처리한 데이터 규모

**생활인구 데이터**:
- 463,856개 문서 처리 완료
- 36개월 (2023-01 ~ 2025-12)
- 424개 지역 (서울시 행정동 전체)
- ZIP 파일 35개 자동 처리

**민원 데이터**:
- 행정동 단위: 종로구 23개 지역
- 구 단위: 서울시 25개 구 × 160개월 = 4,000개 문서
- 기간: 2012-08 ~ 2025-12

**UCI 계산**:
- 48개 지역에 대해 UCI 점수 계산 완료
- 최신 날짜 자동 감지 기능 구현

**발표 포인트**: "대용량 공공데이터를 자동으로 처리하여 실시간 분석이 가능합니다."
```

---

## 5. ETL 파이프라인 및 데이터 처리 기술

### 현재 노션 상태
- ✅ "7-2. DB 설계"에 컬렉션 설명
- ❌ ETL 파이프라인, 데이터 전처리 기술, 해결한 문제들 언급 없음

### 추가 요청 내용

**섹션 위치**: "7) 시스템 구현"에 추가

**추가할 내용**:

```
### ETL 파이프라인 및 데이터 처리

**구현한 ETL 스크립트 (8개)**:
1. 민원 데이터 임포트 (다양한 CSV 형식 지원)
2. 생활인구 데이터 임포트 (ZIP 파일 35개 자동 처리)
3. 구 단위 민원 데이터 임포트
4. 베이스라인 데이터 임포트
5. 상습지역 데이터 임포트
6. 수거 현황 데이터 임포트
7. 시간 패턴 템플릿 생성
8. UCI 계산

**해결한 기술적 문제들**:
- CP949 인코딩 깨짐 → iconv-lite로 자동 변환
- BOM 문자 포함 → 헤더 파싱 시 자동 제거
- ZIP 파일 처리 → unzipper로 자동 압축 해제
- 시간대별 → 일 단위 집계 (24시간 데이터 처리)
- 지역명 숫자 표시 → 행정동 코드 매핑 테이블 생성

**발표 포인트**: "다양한 형식의 공공데이터를 자동으로 처리하여 통일된 형식으로 변환합니다."
```

---

## 6. API 문서화 및 프론트엔드 협업

### 현재 노션 상태
- ✅ "7-1. 백엔드·데이터 처리 스택"에 Swagger 언급
- ❌ API 문서화의 구체적 내용, 프론트엔드 협업 방식 언급 없음

### 추가 요청 내용

**섹션 위치**: "7) 시스템 구현"에 추가

**추가할 내용**:

```
### API 문서화 및 프론트엔드 협업

**Swagger UI** (`/docs`):
- 모든 API 엔드포인트에 상세 설명
- 실제 데이터 기반 예시 값 제공
- Request/Response 스키마 자동 생성
- 프론트엔드 개발자와 실시간 협업 가능

**API 엔드포인트**:
- 총 20+ 개 API 엔드포인트 구현
- 공개 뷰용 API (시민용)
- 관리자 대시보드용 API (행정용)
- 권한 분리 구조

**발표 포인트**: "API 문서화를 통해 프론트엔드와 백엔드가 효율적으로 협업할 수 있습니다."
```

---

## 7. 데모 시나리오에 실제 API 엔드포인트 명시

### 현재 노션 상태
- ✅ "8) 데모 시나리오"에 3-step 설명 있음
- ❌ 실제 사용할 API 엔드포인트, 응답 구조 언급 없음

### 추가 요청 내용

**섹션 위치**: "8) 데모 시나리오" 각 Step에 추가

**추가할 내용**:

```
### Step 1. Priority Queue
**API**: `GET /api/v1/priority-queue?date=2025-12-01&top_n=20`
**응답 구조**:
- rank, unit_id, name, uci_score, uci_grade
- status, status_kr, comfort_index
- why_summary, key_drivers
- habitual_dumping_risk
- anomaly_score, anomaly_flag, anomaly_explanation

### Step 2. 근거 신호 + Action Cards
**API**: 
- `GET /api/v1/comfort-index/{unit_id}?date=2025-12-01` (UCI 상세)
- `GET /api/v1/action-cards?date=2025-12-01&unit_id={unit_id}` (권고 조치)
**응답 구조**:
- UCI components (human/geo/population 점수)
- explain (why_summary, key_drivers)
- Action Cards (title, why, recommended_actions, tags, confidence)

### Step 3. 시간대 패턴/전후 추적
**API**:
- `GET /api/v1/dashboard/time-pattern?unit_id={unit_id}` (시간 패턴)
- `GET /api/v1/dashboard/interventions/{id}/effect` (효과 추적)
**응답 구조**:
- 시간대별/요일별 분포
- 개입 전후 UCI 변화 그래프 데이터
- cleanup_logs 연결
```

---

## 8. 검증·리스크 설계에 데이터 검증 프로세스 추가

### 현재 노션 상태
- ✅ "9) 검증·리스크 설계"에 비둘기 관련 검증 설명 있음
- ❌ 데이터 자체의 검증 프로세스, 품질 관리 언급 없음

### 추가 요청 내용

**섹션 위치**: "9) 검증·리스크 설계"에 추가

**추가할 내용**:

```
### 데이터 검증 프로세스

**자동화된 검증**:
- 정기 검증 (주 1회 권장)
- 데이터 임포트 후 자동 검증
- UCI 계산 후 자동 검증

**검증 항목**:
- 데이터 일관성 (unit_id 매칭, 날짜 형식)
- 값 범위 검증 (UCI 0-100, 등급 A-E)
- 논리적 무결성 (UCI 점수와 등급 일치)
- 데이터 완전성 (날짜 커버리지)

**이슈 해결**:
- Critical 이슈: 즉시 수정 필요
- Warning 이슈: 검토 후 수정
- 자동 수정 스크립트 제공 (예: Grade mismatch)

**발표 포인트**: "데이터 품질을 지속적으로 모니터링하여 계산 결과의 신뢰성을 보장합니다."
```

---

## 9. 기대효과에 구체적 수치/사례 추가

### 현재 노션 상태
- ✅ "11) 기대효과"에 3가지 효과 설명
- ❌ 구체적 수치, 실제 사례, 정량적 효과 언급 없음

### 추가 요청 내용

**섹션 위치**: "11) 기대효과" 각 항목에 추가

**추가할 내용**:

```
### 11-1. 우선순위 리스트
**효과**:
- 한정된 인력을 어디에 먼저 투입할지가 명확해짐
- 특히 생활환경 CCTV 1% 미만의 사각지대 조건에서 효과적
- **예시**: 48개 지역 중 TOP 5 우선 점검 → 인력 배치 효율 80% 향상 (가정)

### 11-2. Action Cards
**효과**:
- "청소하라" 수준을 넘어서 언제/어떻게 개입할지가 시간 패턴 템플릿과 함께 구체화됨
- **예시**: "야간 집중 관리 필요" → 실제 야간 시간대(22시-02시) 집중 모니터링 → 민원 30% 감소 (가정)

### 11-3. Before/After Tracking
**효과**:
- "정책 효과가 있었는지"를 전후 비교 가능한 데이터 구조로 확인
- 단발성 대응이 아니라 학습되는 행정(효과 기반 운영)으로 전환
- **예시**: 개입 전 UCI 80 → 개입 후 UCI 60 (20점 개선) → 해당 개입 방식의 효과 정량화
```

---

## 10. 기술 스택에 실제 사용한 라이브러리 명시

### 현재 노션 상태
- ✅ "7-1. 백엔드·데이터 처리 스택"에 기본 스택 언급
- ❌ 실제 사용한 라이브러리, 버전, 선택 이유 언급 없음

### 추가 요청 내용

**섹션 위치**: "7-1. 백엔드·데이터 처리 스택"에 추가

**추가할 내용**:

```
**실제 사용한 라이브러리**:
- `express`: 웹 프레임워크
- `mongoose`: MongoDB ODM
- `csv-parser`: CSV 파일 파싱
- `xlsx`: Excel 파일 파싱
- `iconv-lite`: CP949 → UTF-8 인코딩 변환
- `date-fns`: 날짜 처리 및 계산
- `swagger-jsdoc`, `swagger-ui-express`: API 문서화
- `joi`: 입력 검증
- `winston`: 구조화된 로깅

**선택 이유**:
- 공공데이터의 다양한 형식(CSV, XLSX, ZIP) 처리
- 한글 인코딩 문제 해결
- 대용량 데이터 배치 처리 성능
```

---

## 11. 입력 검증 및 에러 처리 시스템 (추가!)

### 현재 노션 상태
- ❌ 입력 검증, 에러 처리, 로깅 시스템에 대한 언급 없음

### 추가 요청 내용

**섹션 위치**: "7) 시스템 구현"에 추가

**추가할 내용**:

```
### 입력 검증 및 에러 처리 시스템

**입력 검증 (Joi 기반)**:
- 모든 API 엔드포인트에 Joi 스키마 적용
- 요청 파라미터 자동 검증
- 잘못된 입력 시 명확한 에러 메시지 반환
- 예: 날짜 형식 검증, 숫자 범위 검증, 필수 필드 검증

**중앙화된 에러 처리**:
- 모든 에러를 일관된 형식으로 반환
- 에러 코드 체계화 (예: VALIDATION_ERROR, NOT_FOUND, INTERNAL_ERROR)
- 프론트엔드에서 에러 처리 용이

**구조화된 로깅 (Winston)**:
- 로그 레벨 분리 (error, warn, info, debug)
- 구조화된 로그 형식 (JSON)
- 운영 환경에서 디버깅 및 모니터링 용이

**발표 포인트**: "입력 검증부터 에러 처리까지 체계적으로 관리하여 안정적인 API를 제공합니다."
```

---

## 12. UCI 계산 로직 설명 API (추가!)

### 현재 노션 상태
- ✅ "5-1. UCI(Urban Comfort Index)" 섹션에 계산 방식 설명 있음
- ❌ UCI 계산 로직을 API로 제공하는 기능 언급 없음

### 추가 요청 내용

**섹션 위치**: "5-1. UCI(Urban Comfort Index)" 또는 "7) 시스템 구현"에 추가

**추가할 내용**:

```
### UCI 계산 로직 설명 API

**API**: `GET /api/v1/uci-info`

**기능**:
- UCI 계산 방식, 가중치, 등급 체계를 구조화된 JSON으로 제공
- 프론트엔드에서 "이 지표는 어떻게 계산되나요?" 질문에 답할 수 있도록 설계
- 가중치, 등급 컷오프, 정규화 방식 등 모든 설정값 포함

**응답 구조**:
- 계산 공식 설명
- 신호 그룹별 가중치
- 등급 체계 (A-E)
- 정규화 방식
- 결측치 처리 방법

**발표 포인트**: "UCI 계산 로직을 투명하게 공개하여 신뢰성을 확보합니다."
```

---

## 📝 요약: 노션에 추가할 섹션 목록

1. ✅ **데이터 검증 및 품질 관리 시스템** (새 섹션 또는 "7) 시스템 구현"에 추가)
2. ✅ **AI 이상 탐지 상세 설명 보강** ("5-3" 섹션에 추가)
3. ✅ **시계열 분석 및 데이터 보강 기능** ("5)" 또는 "7)" 섹션에 추가)
4. ✅ **실제 처리한 데이터 규모** ("4)" 또는 "7)" 섹션에 추가)
5. ✅ **ETL 파이프라인 및 데이터 처리 기술** ("7)" 섹션에 추가)
6. ✅ **API 문서화 및 프론트엔드 협업** ("7)" 섹션에 추가)
7. ✅ **데모 시나리오에 실제 API 엔드포인트** ("8)" 섹션에 추가)
8. ✅ **검증·리스크 설계에 데이터 검증 프로세스** ("9)" 섹션에 추가)
9. ✅ **기대효과에 구체적 수치/사례** ("11)" 섹션에 추가)
10. ✅ **기술 스택에 실제 사용한 라이브러리** ("7-1" 섹션에 추가)
11. ✅ **입력 검증 및 에러 처리 시스템** ("7)" 섹션에 추가) - **신규**
12. ✅ **UCI 계산 로직 설명 API** ("5-1" 또는 "7)" 섹션에 추가) - **신규**

---

## 🎯 우선순위

### 높음 (반드시 추가)
1. 데이터 검증 및 품질 관리 시스템
2. 실제 처리한 데이터 규모
3. 데모 시나리오에 실제 API 엔드포인트

### 중간 (추가 권장)
4. AI 이상 탐지 상세 설명 보강
5. ETL 파이프라인 및 데이터 처리 기술
6. 시계열 분석 및 데이터 보강 기능

### 낮음 (여유 시 추가)
7. API 문서화 및 프론트엔드 협업
8. 검증·리스크 설계에 데이터 검증 프로세스
9. 기대효과에 구체적 수치/사례
10. 기술 스택에 실제 사용한 라이브러리
11. 입력 검증 및 에러 처리 시스템
12. UCI 계산 로직 설명 API

---

**작성일**: 2026-01-12  
**목적**: 노션 발표 초안 보완 요청사항 정리

